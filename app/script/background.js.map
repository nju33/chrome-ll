{"version":3,"sources":["background.coffee"],"names":[],"mappings":"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","file":"background.js","sourceRoot":"/source/","sourcesContent":["RegExp.quote = (str) ->\n  str.replace /([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\"\n\naliases =\n  str: null\n  obj: null\n\nobjectize = (str) ->\n  re = /(.*),(.*)/\n  ret = {}\n\n  lines = str.split \"\\n\"\n  for line in lines\n    [key, val] = line.match(re)[1..]\n    ret[key] = val\n\n  ret\n\nchrome.omnibox.onInputStarted.addListener ->\n  chrome.storage.local.get 'aliases', (ret) ->\n    aliases.str = ret.aliases\n    aliases.obj = objectize(aliases.str)\n\nchrome.omnibox.onInputChanged.addListener (txt, suggest) ->\n  reTxt = new RegExp RegExp.quote(txt)\n  suggestions = []\n\n  for alias, url of aliases.obj\n    if reTxt.test alias\n      suggestions.push\n        content: alias,\n        description: \"#{alias} / #{url}\"\n\n  suggest suggestions\n\nchrome.omnibox.onInputEntered.addListener (txt) ->\n  contains = txt.match /^\\+(.*)/\n  if contains?\n    setQuery = {currentWindow: true, active: true}\n    url = null\n\n    chrome.tabs.query setQuery, (tabs) ->\n      aliases.str += \"\\n#{contains[1]},#{tabs[0].url}\"\n\n      chrome.storage.local.set {aliases: aliases.str}, ->\n  else\n    chrome.tabs.update url: aliases.obj[txt]\n\nchrome.browserAction.onClicked.addListener ->\n  chrome.tabs.update url: chrome.runtime.getURL 'options.html'\n"]}